---
title: ikoula Ubuntu 18.04 独服配置 IPv6
date: 2019-08-19 20:00:00
tags:
- IPv6
- Ubuntu
- ikoula
- 折腾
---

之前在 ikoula 买了个 8.99o/mo 的独服用来刷 PT ，最近看了下 ikoula 终于加上了 18.04 的镜像，就去升级了下。<!--more-->

就在我用着之前开启 IPv6 的方法准备开启 IPv6 的时候，就发现怎样都不能成功。

后来 ~~ikoula 的客服告诉我~~ 发现  ubuntu 18.04 的网络配置默认使用了 netplan 这个软件，就记录下怎么配置 ikoula 的 IPv6。

配置文件在 `/etc/netplan/01-netcfg.yaml`

原来的内容:
```yml
# Network configuration file
# Auto generated by Ikoula

network:
  version: 2
  renderer: networkd
  ethernets:
    eth0:
      dhcp4: no
      addresses: [AAA.BBB.CCC.DDD/24]
      gateway4: AAA.BBB.CCC.1
      nameservers:
        addresses: [213.246.36.14,213.246.33.144,80.93.83.11]
```

要改成这样

```yml
# Network configuration file
# Auto generated by Ikoula

network:
  version: 2
  renderer: networkd
  ethernets:
    eth0:
      dhcp4: no
      addresses: [AAA.BBB.CCC.DDD/24,"2a00:c70:1:AAA:BBB:CCC:DDD:1/96"]
      gateway4: AAA.BBB.CCC.1
      gateway6: 2a00:c70:1:AAA:BBB:CCC::1
      nameservers:
        addresses: [213.246.36.14,213.246.33.144,80.93.83.11]
```

修改好了以后要用 `netplan try` 验证下格式有没有问题，没有问题 netplan 就会问是否加载配置，加载即可。

参考:
- https://www.snel.com/support/how-to-configure-ipv6-with-netplan-on-ubuntu-18-04/
- https://npchk.info/ikoula-ipv6/